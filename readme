# Proyecto CINF104 - ClasificaciÃ³n de GRD en Pacientes Hospital El Pino ğŸ¥

Este repositorio corresponde al desarrollo del **Proyecto 1** de la asignatura *Aprendizaje de MÃ¡quinas (CINF104)*. El objetivo principal es predecir el grupo relacionado de diagnÃ³stico (**GRD**) de un paciente en base a su informaciÃ³n clÃ­nica, utilizando distintos modelos de clasificaciÃ³n.

---
## ğŸ§± Arquitectura del Proyecto
ğŸ“‚ raÃ­z_del_proyecto/
â”‚
â”œâ”€â”€ ğŸ“‚ data/                          # Carpeta donde se almacenan los datos originales del hospital
â”‚   â”œâ”€â”€ CIE-9.xlsx                   # CÃ³digos oficiales de procedimientos mÃ©dicos (CIE-9)
â”‚   â”œâ”€â”€ CIE-10.xlsx                  # CÃ³digos oficiales de diagnÃ³sticos (CIE-10)
â”‚   â”œâ”€â”€ dataset_elpino.csv          # Dataset clÃ­nico principal con pacientes y GRDs
â”‚   â””â”€â”€ Tablas maestras bases GRD.xlsx  # Archivo maestro para mapear los cÃ³digos GRD
â”‚
â”œâ”€â”€ ğŸ codigo.py                     # Script principal de preprocesamiento de datos
â”‚                                   # - Limpia y transforma datos
â”‚                                   # - Genera y exporta nuevo_dataset listo para modelar
â”‚
â”œâ”€â”€ ğŸ graficos.py                  # Script de anÃ¡lisis exploratorio
â”‚                                   # - Genera grÃ¡ficos de distribuciÃ³n y correlaciÃ³n
â”‚                                   # - Guarda los resultados en la carpeta /Graficos
â”‚
â”œâ”€â”€ ğŸ modelos_prueba.py           # Script de entrenamiento y evaluaciÃ³n de modelos
â”‚                                   # - Entrena RF, DT, XGBoost y MLP
â”‚                                   # - Imprime mÃ©tricas y guarda modelos entrenados
â”‚
â”œâ”€â”€ ğŸ“„ readme                       # ExplicaciÃ³n detallada del proyecto, estructura y uso
â”‚
â”œâ”€â”€ ğŸ“„ requirements.txt             # Lista de dependencias necesarias para correr el proyecto
â”‚
â””â”€â”€ (opcional)
    ğŸ“‚ Graficos/                    # Carpeta que se genera automÃ¡ticamente con las imÃ¡genes
    ğŸ“‚ modelos/                     # Carpeta que se genera automÃ¡ticamente con los modelos entrenados



## ğŸ“ Archivos principales del proyecto

### `codigo.py`
Este archivo es el encargado de **preprocesar los datos**. Se realizan las siguientes tareas:

- Carga del dataset principal (`dataset_elpino.csv`) junto con archivos auxiliares (`CIE-9.xlsx`, `CIE-10.xlsx`, `Tablas maestras bases GRD.xlsx`).
- Limpieza de columnas y filas con datos nulos o irrelevantes.
- TransformaciÃ³n de diagnÃ³sticos y procedimientos de texto a valores numÃ©ricos usando los cÃ³digos oficiales.
- ConversiÃ³n del campo `Sexo (Desc)` a valores binarios.
- Mapeo de GRDs usando la tabla maestra.
- Balanceo del conjunto de datos usando **RandomOverSampler**.
- GeneraciÃ³n del dataframe `nuevo_dataset`, ya listo para ser utilizado por los modelos.

ğŸ“¦ Al final, exporta variables clave (`df`, `y`, `y_balanced`, `num_cols`, `nuevo_dataset`) que se utilizan en los demÃ¡s scripts.

---

### `graficos.py`
Este script genera **grÃ¡ficos exploratorios y descriptivos** del dataset original y del dataset balanceado.

Incluye:

- DistribuciÃ³n de GRDs antes y despuÃ©s del balanceo.
- Matriz de correlaciÃ³n de variables numÃ©ricas.
- DistribuciÃ³n por sexo.
- Boxplots e histogramas de las primeras variables numÃ©ricas.
- **DistribuciÃ³n detallada de los GRDs mÃ¡s frecuentes (â‰¥ 100 casos)** con remapeo de IDs para facilitar el anÃ¡lisis visual.

ğŸ–¼ Todos los grÃ¡ficos se guardan automÃ¡ticamente en la carpeta `/Graficos`.

---

### `modelos_prueba.py`
Este archivo se encarga de **entrenar y evaluar varios modelos de clasificaciÃ³n** usando el `nuevo_dataset`.

Modelos utilizados:

- ğŸŒ² Random Forest
- ğŸŒ³ Ãrbol de DecisiÃ³n
- ğŸš€ XGBoost (requiere codificaciÃ³n de etiquetas con `LabelEncoder`)
- ğŸ§  Red Neuronal (MLPClassifier)

AdemÃ¡s:

- Se evalÃºa cada modelo con mÃ©tricas estÃ¡ndar: accuracy, precisiÃ³n, recall, F1-score, MAE y MSE.
- Se genera una **matriz de confusiÃ³n** para cada modelo y se guarda en la carpeta `/imagenes`.
- Cada modelo es **guardado en la carpeta `/modelos`** en formato `.pkl` para su uso posterior (mediante `joblib`).

---

## âš™ï¸ CÃ³mo ejecutar el proyecto

1. AsegÃºrate de tener Python 3.10 o superior instalado.
2. Instala los paquetes necesarios:

```bash
pip install pandas numpy scikit-learn matplotlib seaborn imbalanced-learn xgboost openpyxl joblib

